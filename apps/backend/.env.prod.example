# Backend Production Environment Variables
# Copy this file to .env.prod and generate secure values for all secrets

NODE_ENV=production
PORT=3001
HOST=0.0.0.0
LOG_LEVEL=info

# Database Configuration
# DATABASE_TYPE can be "postgresql", "pglite", or "sqlite"
# - "postgresql": Full PostgreSQL server (recommended for production)
# - "pglite": Embedded PostgreSQL (for simple deployments)
# - "sqlite": File-based database (lightweight alternative)
DATABASE_TYPE=postgresql

# PostgreSQL (production with Docker container networking)
# Password 'eclaire' matches default in pm2.deps.config.js - change both together if needed
DATABASE_URL=postgresql://eclaire:eclaire@eclaire-postgres:5432/eclaire

# PGlite Configuration (only used when DATABASE_TYPE=pglite)
# Path where PGlite stores its file-based database (container path)
PGLITE_DATA_DIR=./data/db/pglite

# SQLite Configuration (only used when DATABASE_TYPE=sqlite)
# Path where SQLite stores its database file (container path)
SQLITE_DATA_DIR=./data/db/sqlite.db

# Queue Backend Configuration
# QUEUE_BACKEND can be "redis" or "database"
# - "redis": Uses Redis/BullMQ for job queuing (recommended for production)
# - "database": Uses database for job queuing (no Redis needed)
QUEUE_BACKEND=redis

# Redis/Queue Configuration (production with Docker container networking)
REDIS_URL=redis://eclaire-redis:6379

# Frontend URL (your production domain)
FRONTEND_URL=https://app.your-domain.com

# Storage directories (production paths)
USERS_DIR=./data/users
DATA_DIR=./data
LOGS_DIR=./data/logs
CONFIG_DIR=./config

# AI Configuration - Active model selection is configured in data/config/models.json
# The activeModel.backend setting in JSON config determines which model is used
AI_LOCAL_PROVIDER_URL=http://host.docker.internal:11434
#AI_PROXY_PROVIDER_URL=https://openrouter.ai/api/v1/chat/completions
#AI_PROXY_API_KEY=
AI_PROMPT_LOGGING_ENABLED=true

# Security Configuration
# Authentication (MUST GENERATE SECURE VALUE FOR PRODUCTION)
BETTER_AUTH_SECRET=
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

# Master Encryption Key (MUST GENERATE SECURE VALUE FOR PRODUCTION)
# Must be 32 bytes (64 hex chars). Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
MASTER_ENCRYPTION_KEY=

# API Key HMAC Security (MUST GENERATE SECURE VALUES FOR PRODUCTION)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
API_KEY_HMAC_VERSION=1
API_KEY_HMAC_KEY_V1=

