# Backend Development Environment Variables
# Copy this file to .env.dev and adjust as needed for your local development setup

NODE_ENV=development
PORT=3001
HOST=0.0.0.0
LOG_LEVEL=debug

# Service Role Configuration
# SERVICE_ROLE can be "api", "worker", or "all"
# - "api": Run only the HTTP API server (workers disabled)
# - "worker": Run only queue workers (API disabled)
# - "all": Run both API server AND workers in one process (recommended for simple deployments)
SERVICE_ROLE=all

# Queue Backend Configuration
# QUEUE_BACKEND can be "redis", "postgres", or "sqlite"
# - "redis": Use Redis/BullMQ for job queues (requires REDIS_URL)
# - "postgres": Use PostgreSQL for job queues (supports remote workers)
# - "sqlite": Use SQLite for job queues (only valid with SERVICE_ROLE=all)
QUEUE_BACKEND=sqlite

# Database Configuration
# DATABASE_TYPE can be "postgresql", "pglite", or "sqlite" (default)
# - "sqlite": File-based database, no external dependencies (simplest, default)
# - "pglite": Embedded PostgreSQL, no external server needed
# - "postgresql": Full PostgreSQL server (production-ready, requires external database)
DATABASE_TYPE=sqlite
#DATABASE_TYPE=pglite
#DATABASE_TYPE=postgresql

# PostgreSQL (local development)
DATABASE_URL=postgresql://eclaire:eclaire@127.0.0.1:5432/eclaire

# PGlite Configuration (only used when DATABASE_TYPE=pglite)
# Path where PGlite stores its file-based database
PGLITE_DATA_DIR=../../data/pglite

# SQLite Configuration (only used when DATABASE_TYPE=sqlite)
# Path where SQLite stores its database file
SQLITE_DB_PATH=../../data/sqlite/sqlite.db

# Redis Configuration (only needed when QUEUE_BACKEND=redis)
#REDIS_URL=redis://127.0.0.1:6379

# Frontend URL (local development)
FRONTEND_URL=http://localhost:3000

# Storage directories (relative to backend app directory)
USERS_DIR=../../data/users
DATA_DIR=../../data
LOGS_DIR=../../data/logs
CONFIG_DIR=../../config

# AI Configuration - Active model selection is configured in data/config/models.json
# The activeModel.backend setting in JSON config determines which model is used
AI_LOCAL_PROVIDER_URL=http://127.0.0.1:11434
#AI_PROXY_PROVIDER_URL=https://openrouter.ai/api/v1/chat/completions
#AI_PROXY_API_KEY=
AI_PROMPT_LOGGING_ENABLED=true

# Worker Configuration (only used when SERVICE_ROLE=worker or all)
# Port for standalone worker service (only used in SERVICE_ROLE=worker mode for Bull Board UI)
#WORKER_PORT=3002
# Number of concurrent jobs to process
WORKER_CONCURRENCY=3
# AI processing timeout in milliseconds
AI_TIMEOUT=180000

# Worker API Configuration (for internal worker-to-backend communication)
BACKEND_URL=http://localhost:3001

# Worker AI Configuration
# Workers use a separate AI provider URL to run a different (typically smaller/faster) model
# than the backend. This allows running e.g. Gemma-3-4B for workers on port 11435
# while the backend uses Qwen3-14B on port 11434.
WORKER_AI_LOCAL_PROVIDER_URL=http://127.0.0.1:11435
#WORKER_AI_PROXY_PROVIDER_URL=https://openrouter.ai/api/v1/chat/completions
#WORKER_AI_PROXY_API_KEY=

# External Services
DOCLING_SERVER_URL=http://127.0.0.1:5001

# Worker Storage Configuration
BROWSER_DATA_DIR=../../data/browser-data
WORKER_SHARED_DATA_PATH=../../data/users

# Worker API Keys (development values - safe for local dev)
# These keys are used for internal worker authentication
WORKER_API_KEY=sk-DEVONLYWORKER01-DEVONLY0000000000000000000000000
AI_ASSISTANT_API_KEY=sk-DEVONLYAIASST01-DEVONLY1111111111111111111111111

# Optional: Reddit API Configuration (for Reddit bookmark processing)
#REDDIT_CLIENT_ID=
#REDDIT_CLIENT_SECRET=

# Optional: GitHub Personal Access Token (for higher rate limits on GitHub bookmarks)
#GITHUB_TOKEN=

# Security Configuration
# Allow dev keys (enables insecure development patterns for testing)
# WARNING: NEVER set this to true in production environments
ALLOW_DEV_KEYS=true

# Authentication (development secret - safe for local dev)
BETTER_AUTH_SECRET=DEVONLY-auth-secret-change-in-production
# For production, generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

# Master Encryption Key (fixed dev value - safe for local development)
# Must be 32 bytes (64 hex chars). Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
MASTER_ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# API Key HMAC Security (development values)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
API_KEY_HMAC_VERSION=1
API_KEY_HMAC_KEY_V1=DEVONLY-hmac-key-change-in-production

